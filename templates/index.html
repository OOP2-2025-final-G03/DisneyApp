<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>注文管理システム</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='base-style.css') }}"
    />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <h1>注文管理システム</h1>

    <ul>
      <li><a href="{{ url_for('user.list') }}">ユーザー（顧客）</a></li>
      <li><a href="{{ url_for('attraction.list') }}">アトラクション</a></li>
      <li><a href="{{ url_for('history.list') }}">履歴</a></li>
    </ul>

    <h2>月別アトラクション参加数</h2>
    <canvas id="history_monthly_chart"></canvas>

    <script>
      const history_monthly_chart = document.getElementById(
        "history_monthly_chart"
      );

      fetch("/api/history_monthly_count")
        .then((res) => res.json())
        .then((data) => {
          console.log(data);

          new Chart(history_monthly_chart, {
            type: "line",
            data: {
              labels: data.labels,
              datasets: [
                {
                  label: "月別参加数",
                  data: data.data,
                  borderWidth: 2,
                  borderColor: "#4A90E2",
                  backgroundColor: "rgba(74,144,226,0.3)",
                },
              ],
            },
            options: {
              responsive: true,
              scales: {
                y: {
                  beginAtZero: true,
                },
              },
            },
          });
        });
    </script>
  </body>
</html>
